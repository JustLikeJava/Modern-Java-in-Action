# Chapter 10
- 도메인 전용 언어(DSL)
    - Domain-Specific-Language

## 10.1 도메인 전용 언어
- `DSL`은 특정 비즈니스 도메인의 문제를 해결하려고 만든 언어
- 자바에서는 도메인을 표현할 수 있는 클래스와 메서드 집합이 필요
- DSL은 특정 도메인을 인터페이스로 만든 API
- DSL의 두 가지 필요성
    - `의사 소통의 왕` : 코드의 의도가 명확하게 전달, 코드가 비즈니스 요구사항에 부합하는지 확인
    - `한 번 코드를 구현하지만 여러 번 읽는다` : 가독성은 유지보수의 핵심

### A. DSL의 장점과 단점
- 장점
    - `간결함` : API는 비즈니스 로직을 간편하게 캡슐화, 반복을 피하고 코드를 간결하게 만듬
    - `가독성` : 다양한 조직 구성원 간에 코드와 도메인 영역이 공유
    - `유지보수` : 잘 설계된 DSL 코드는 유지보수 쉬움
    - `높은 수준의 추상화` : 추상화 수준에서 동작하므로 세부 사항을 숨김
    - `집중` : 프로그래머가 특정 코드에 집중할 수 있음, 생산성 향상
    - `관심사분리` : 독립적으로 비즈니스 관련 코드에 집중하기가 용이, 유지보수 쉬운 코드 구현 가능
- 단점
    - `DSL 설계 어려움` : 간결하게 제한적인 언어에 도메인 지식을 담는 것은 어려운 작업
    - `개발 비용` : 코드에 DSL을 추가하는 작업은 초기 프로젝트에 많은 비용과 시간이 소모, 유지보수와 변경은 프로젝트에 부담을 주는 요소
    - `추가 우회 계층` : 추가적인 계층으로 도메인 모델을 감싸며 계층을 최대한 작게 만들어 성능 문제를 회피
    - `새로 배워야 하는 언어` : 새로운 언어에 대한 부담
    - `호스팅 언어 한계` : 자바 같은 범용 프로그래밍 언어는 장황하고 엄격한 문법, 즉 사용자 친화적 DSL 만들기 어려움

### JVM에서 이용할 수 있는 다른 DSL 해결책
- DSL의 카테고리 구분하는 가장 흔한 방법 : `내부 DSL`과 `외부 DSL`의 분리
    - 내부 DSL(임베디드 DSL)은 순수 자바 코드 같은 기존 호스팅 언어 기반으로 구현
    - 외부 DSL은 호스팅 언어와 독립적으로 자체의 문법
    - 스칼라나 그루비처럼 자바가 아니지만 JVM에서 실행되며 더 유연하고 표현력이 강력한 언어를 `다중 DSL`

#### 내부 DSL
- 자바에서는 자바로 구현한 DSL을 의미
- 자바는 유연성이 떨어지는 문법으로 읽기 쉽고, 간단하고, 표현력 있는 DSL 만드는데 한계가 존재
- 순수 자바로 DSL 구현함의 장점
    - 외부 DSL에 비해 새로운 패턴과 기술을 배워 DSL을 구현하는 노력이 감소
    - 나머지 코드와 DSL을 함께 컴파일 가능 -> 비용 감소
    - 추가 DSL 쉽게 합칠 수 있음

#### 다중 DSL
- 요즘 JVM에서 실행되는 언어는 100개가 넘음
- DSL은 기반 프로그래밍 언어에 영향을 받으므로 간결한 DSL 만드는 데 새로운 언어의 특성들이 아주 중요
- 불편함
    - 기존 언어의 고급 기능을 사용할 수 있는 충분한 지식 필요
    - 두 개 이상의 언어가 혼재하므로 여러 컴파일러로 소스를 빌드하도록 빌드 과정 개선
    - 호환성 때문에 성능이 손실될 수 있으므로 기존 컬렉션을 대상 언어의 API에 맞게 변환

#### 외부 DSL
- 자신만의 문법과 구문으로 새 언어를 설계
    - 새 언어를 파싱하고, 파서의 결과를 분석하고, 외부 DSL을 실행할 코드 생성
- 가장 큰 장점은 외부 DSL이 제공하는 무한한 유연성
- 단점은 이러한 제대로된 설계 과정은 비용이 많이 들고 어려움이 존재