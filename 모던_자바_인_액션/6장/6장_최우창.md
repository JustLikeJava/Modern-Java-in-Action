## Chapter 06

### 6.1 컬렉터란 무엇인가?

- Collector 인터페이스 구현은 스트림의 요소를 어떤 식으로 도출할지 지정
  - `toList`
  - `groupingBy` : 각 키 버킷 그리고 각 키 버킷에 대응하는 요소 리스트를 값으로 포함하는 맵 생성



#### A. 고급 리듀싱 기능을 수행하는 컬렉터

- 스트림에 collect를 호출하면 스트림의 요소에 리듀싱 연산이 수행된다.

```java
List<Transaction> transactions = transactionStream.collect(Collectors.toList());
```



#### B. 미리 정의된 컬렉터

- Collectors에서 제공하는 메서드의 기능을 크게 세 가지로 구분
  - 스트림 요소를 하나의 값으로 리듀스하고 요약
  - 요소 그룹화
  - 요소 분할

<br>

### 6.2 리듀싱과 요약

```java
long howManyDishes = menu.stream().collect(Collectors.counting());

// 생략 가능
long howManyDishes = menu.stream().count();
```

- `counting` 이라는 팩토리 메서드



#### A. 스트림값에서 최댓값과 최솟값 검색

- `Collectors.maxBy`
- `Collectors.minBy`
- 스트림의 요소를 비교하는데 사용할 `Comparator`를 인수로 받는다.

```java
Comparator<Dish> dishCaloriesComparator = Comparator.comparingInt(Dish::getCalories);

Optional<Dish> mostCalorieDish = menu.stream().collect(maxBy(dishCaloriesComparator));
```

- 스트림에 있는 객체의 숫자 필드의 합계나 평균 등을 반환하는 연산에도 리듀싱 기능이 자주 사용
  - 이러한 연산을 **요약** 연산이라 부른다.



#### B. 요약 연산

- `Collectors.summingInt` 라는 특별한 요약 팩토리 메서드를 제공
  - summingInt는 객체를 int로 매핑하는 함수를 인수로 받는다.
  - 인수로 전달된 함수는 객체를 int로 매핑한 컬렉터를 반환
- `Collectors.summingLong`과 `Collectors.summingDouble` 메서드도 같은 방식으로 동작

```java
int totalCalories = menu.stream().collect(summing(Dish::getCalories));
```

- `Collectors.averagingInt`, `averagingLong`, `averagingDouble` 등 평균을 계산

```java
double avgCalories = menu.stream().collect(averagingDouble(Dish::getCalories));
```

- 종종 두 개 이상의 연산을 한 번에 수행해야 하는 경우

  - 팩토리 메서드 `summarizingInt`가 반환하는 컬렉터를 사용
  - 하나의 요약 연산으로 요소 수, 합계, 평균, 최댓값, 최솟값 등 계산

  ```java
  IntSummaryStatistics menuStatistics = menu.stream().collect(summarizingInt(Dish::getCalories));
  
  // menuStatistics를 출력하면
  IntSummaryStatistics{count=9, sum=4300, min=120, average=477.777778, max=800}
  ```

  - `summarizingDouble`, `summarizingLong` 메서드 존재